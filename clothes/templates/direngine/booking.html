{% extends "direngine/base-detail.html" %}
{% load static %}

{% block hero-image %}
  {% for i in slideshow|slice:":1" %}   
    <div class="hero-wrap js-fullheight" style="background-image: url('/media/{{i.file_path}}');">
        <div class="overlay"></div>
        <div class="container">
        <div class="row no-gutters slider-text js-fullheight align-items-center justify-content-center" data-scrollax-parent="true">
            <div class="col-md-9 ftco-animate text-center" data-scrollax=" properties: { translateY: '70%' }">
            <!-- <p class="breadcrumbs" data-scrollax="properties: { translateY: '30%', opacity: 1.6 }"><span class="mr-2"><a href="index.html">Home</a></span> <span class="mr-2"><a href="hotel.html">Hotel</a></span> <span>Hotel Single</span></p> -->
            <h1 class="mb-3 bread" data-scrollax="properties: { translateY: '30%', opacity: 1.6 }">Booking Details</h1>
            </div>
        </div>
        </div>
    </div>
  {% endfor %}
{% endblock %}

{% block detail %}

<section class="ftco-section ftco-degree-bg">
    <div class="container">
      <div class="row">
          <!-- <div class="col-lg-3 sidebar"> -->
              <!-- <div class="sidebar-wrap bg-light ftco-animate"> -->
                  <!-- <h3 class="heading mb-4">Find City</h3>
                  <form action="#">
                      <div class="fields">
                    <div class="form-group">
                      <input type="text" class="form-control" placeholder="Destination, City">
                    </div>
                    <div class="form-group">
                      <div class="select-wrap one-third">
                      <div class="icon"><span class="ion-ios-arrow-down"></span></div>
                      <select name="" id="" class="form-control" placeholder="Keyword search">
                        <option value="">Select Location</option>
                        <option value="">San Francisco USA</option>
                        <option value="">Berlin Germany</option>
                        <option value="">Lodon United Kingdom</option>
                        <option value="">Paris Italy</option>
                      </select>
                    </div>
                    </div>
                    <div class="form-group">
                      <input type="text" id="checkin_date" class="form-control" placeholder="Date from">
                    </div>
                    <div class="form-group">
                      <input type="text" id="checkin_date" class="form-control" placeholder="Date to">
                    </div>
                    <div class="form-group">
                        <div class="range-slider">
                            <span>
                                          <input type="number" value="25000" min="0" max="120000"/>	-
                                          <input type="number" value="50000" min="0" max="120000"/>
                                        </span>
                                        <input value="1000" min="0" max="120000" step="500" type="range"/>
                                        <input value="50000" min="0" max="120000" step="500" type="range"/>
                                        </svg>
                                      </div>
                    </div>
                    <div class="form-group">
                      <input type="submit" value="Search" class="btn btn-primary py-3 px-5">
                    </div>
                  </div>
              </form> -->
              <!-- </div>
              <div class="sidebar-wrap bg-light ftco-animate"> -->
                  <!-- <h3 class="heading mb-4">Star Rating</h3>
                  <form method="post" class="star-rating">
                            <div class="form-check">
                                  <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                  <label class="form-check-label" for="exampleCheck1">
                                      <p class="rate"><span><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i></span></p>
                                  </label>
                            </div>
                            <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="exampleCheck1">
                            <label class="form-check-label" for="exampleCheck1">
                                 <p class="rate"><span><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star-o"></i></span></p>
                            </label>
                            </div>
                            <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="exampleCheck1">
                            <label class="form-check-label" for="exampleCheck1">
                                <p class="rate"><span><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star-o"></i><i class="icon-star-o"></i></span></p>
                           </label>
                            </div>
                            <div class="form-check">
                              <input type="checkbox" class="form-check-input" id="exampleCheck1">
                            <label class="form-check-label" for="exampleCheck1">
                                <p class="rate"><span><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i></span></p>
                            </label>
                            </div>
                            <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="exampleCheck1">
                            <label class="form-check-label" for="exampleCheck1">
                                <p class="rate"><span><i class="icon-star"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i></span></p>
                              </label>
                            </div>
                          </form> -->
              <!-- </div> -->
        <!-- </div> -->
        <div class="col-lg-12">
            <div class="row">

                  <div class="col-md-12 hotel-single ftco-animate mb-5 mt-4">
                    <h4 class="mb-5">Check Availability &amp; Booking</h4>
                      <!-- <form method="post"> -->
                    
                        <div class="fields">
                            <div class="row">
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Name">
                                  </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                      <input type="text" class="form-control" placeholder="Email">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                      <input type="text" id="checkin_date" class="form-control" placeholder="Date from">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <input type="text" id="checkin_date" class="form-control" placeholder="Date to">
                                  </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                      <div class="select-wrap one-third">
                                        <div class="icon"><span class="ion-ios-arrow-down"></span></div>
                                        <select name="" id="" class="form-control" placeholder="Guest">
                                          <option value="0">Guest</option>
                                          <option value="1">1</option>
                                          <option value="2">2</option>
                                          <option value="3">3</option>
                                          <option value="4">4</option>
                                        </select>
                                      </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                      <div class="form-group">
                                      <div class="select-wrap one-third">
                                      <div class="icon"><span class="ion-ios-arrow-down"></span></div>
                                      <select name="" id="" class="form-control" placeholder="Children">
                                        <option value="0">Children</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                      </select>
                                    </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                      <input type="submit" value="Check Availability" class="booking btn btn-primary py-3" onclick="do_check_availability();">
                                      <!-- <input type="submit" value="Check Availability" class="btn btn-primary py-3"> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                      <!-- </form> -->
                </div>
                <!-- <div class="col-md-12 hotel-single ftco-animate mb-5 mt-4">
                    <h4 class="mb-4">Review &amp; Ratings</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <form method="post" class="star-rating">
                                        <div class="form-check">
                                              <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                              <label class="form-check-label" for="exampleCheck1">
                                                  <p class="rate"><span><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i> 100 Ratings</span></p>
                                              </label>
                                        </div>
                                        <div class="form-check">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                        <label class="form-check-label" for="exampleCheck1">
                                             <p class="rate"><span><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star-o"></i> 30 Ratings</span></p>
                                        </label>
                                        </div>
                                        <div class="form-check">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                        <label class="form-check-label" for="exampleCheck1">
                                            <p class="rate"><span><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star-o"></i><i class="icon-star-o"></i> 5 Ratings</span></p>
                                       </label>
                                        </div>
                                        <div class="form-check">
                                          <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                        <label class="form-check-label" for="exampleCheck1">
                                            <p class="rate"><span><i class="icon-star"></i><i class="icon-star"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i> 0 Ratings</span></p>
                                        </label>
                                        </div>
                                        <div class="form-check">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                        <label class="form-check-label" for="exampleCheck1">
                                            <p class="rate"><span><i class="icon-star"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i> 0 Ratings</span></p>
                                          </label>
                                        </div>
                                      </form>
                        </div>
                    </div>
                </div> -->
                <!-- <div class="col-md-12 hotel-single ftco-animate mb-5 mt-5">
                    <h4 class="mb-4">Related Article</h4>
                    <div class="row">
                        <div class="col-md-4">
                                    {% for i in article %}
                                        <div class="destination">
                                            <a href="hotel-single.html" class="img img-2" style="background-image: url(images/hotel-1.jpg);"></a>
                                            <div class="text p-3">
                                                <div class="d-flex">
                                                    <div class="one">
                                                        <h3><a href="hotel-single.html">Hotel, Italy</a></h3>
                                                        <p class="rate">
                                                            <i class="icon-star"></i>
                                                            <i class="icon-star"></i>
                                                            <i class="icon-star"></i>
                                                            <i class="icon-star"></i>
                                                            <i class="icon-star-o"></i>
                                                            <span>8 Rating</span>
                                                        </p>
                                                    </div>
                                                    <div class="two">
                                                        <span class="price per-price">$40<br><small>/night</small></span>
                                                    </div>
                                                </div>
                                                <p>Far far away, behind the word mountains, far from the countries</p>
                                                <hr>
                                                <p class="bottom-area d-flex">
                                                    <span><i class="icon-map-o"></i> Miami, Fl</span> 
                                                    <span class="ml-auto"><a href="#">Book Now</a></span>
                                                </p>
                                            </div>
                                        </div>
                                    {% endfor %}
                              </div>
                              <div class="col-md-4">
                                  <div class="destination">
                                      <a href="hotel-single.html" class="img img-2" style="background-image: url(images/hotel-2.jpg);"></a>
                                      <div class="text p-3">
                                          <div class="d-flex">
                                              <div class="one">
                                                  <h3><a href="hotel-single.html">Hotel, Italy</a></h3>
                                                  <p class="rate">
                                                      <i class="icon-star"></i>
                                                      <i class="icon-star"></i>
                                                      <i class="icon-star"></i>
                                                      <i class="icon-star"></i>
                                                      <i class="icon-star-o"></i>
                                                      <span>8 Rating</span>
                                                  </p>
                                              </div>
                                              <div class="two">
                                                  <span class="price per-price">$40<br><small>/night</small></span>
                                              </div>
                                          </div>
                                          <p>Far far away, behind the word mountains, far from the countries</p>
                                          <hr>
                                          <p class="bottom-area d-flex">
                                              <span><i class="icon-map-o"></i> Miami, Fl</span> 
                                              <span class="ml-auto"><a href="#">Book Now</a></span>
                                          </p>
                                      </div>
                                  </div>
                              </div>
                              <div class="col-md-4">
                                  <div class="destination">
                                      <a href="hotel-single.html" class="img img-2" style="background-image: url(images/hotel-3.jpg);"></a>
                                      <div class="text p-3">
                                          <div class="d-flex">
                                              <div class="one">
                                                  <h3><a href="hotel-single.html">Hotel, Italy</a></h3>
                                                  <p class="rate">
                                                      <i class="icon-star"></i>
                                                      <i class="icon-star"></i>
                                                      <i class="icon-star"></i>
                                                      <i class="icon-star"></i>
                                                      <i class="icon-star-o"></i>
                                                      <span>8 Rating</span>
                                                  </p>
                                              </div>
                                              <div class="two">
                                                  <span class="price per-price">$40<br><small>/night</small></span>
                                              </div>
                                          </div>
                                          <p>Far far away, behind the word mountains, far from the countries</p>
                                          <hr>
                                          <p class="bottom-area d-flex">
                                              <span><i class="icon-map-o"></i> Miami, Fl</span> 
                                              <span class="ml-auto"><a href="#">Book Now</a></span>
                                          </p>
                                      </div>
                                  </div>
                              </div>
                    </div>
                </div> -->

            </div>
        </div> <!-- .col-md-8 -->


        <div class="col-lg-12" id="room-available">
          <div class="row">

                <div class="col-md-12 hotel-single ftco-animate mb-5 mt-4">
                  <hr>
                  <h4 class="mb-5" id="room-status"></h4>

                  {% if request.user.is_authenticated %}
                    <p>Login As : <strong>{{request.user}}</strong>, <a href="/accounts/logout?next=/booking/detail">Logout</a> if not you</p>                    

                    <div class="fields" id="transaction-summary">
                      <div class="row">                        
                          <div class="col-md-6">
                            <label class="form-check-label pull-right" >
                              <!-- <p class="rate"><span><i class="icon-star"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i> 0 Ratings</span></p> -->
                              <strong>Invoice Number : 1xxx.2023</strong>
                            </label>
                          </div>
                      </div>
                      <div class="row">                        
                          <div class="col-md-3">
                            <label class="form-check-label" >
                              <!-- <p class="rate"><span><i class="icon-star"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i> 0 Ratings</span></p> -->
                              <strong>rp.3.000.000</strong>
                            </label>
                            <!-- <div class="products">
                              
                              <div class="item">
    
                                <span class="price">999</span>
                                <p class="item-name">asdada</p>
                                <p class="item-description">asdsad</p>
                              </div>
                              
                              <div class="total">Total<span class="price">78979</span></div>
                              
                            </div> -->
                          </div>
                          <div class="col-md-3">
                            <label class="form-check-label" >
                              <!-- <p class="rate"><span><i class="icon-star"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i> 0 Ratings</span></p> -->
                              <strong>1 Room For Nov 1, 2023 to Nov 2, 2023</strong>
                            </label>
                          </div>
                      </div>
                      <div class="row">                        
                          <div class="col-md-6">
                            <label class="form-check-label pull-right" >
                              <!-- <p class="rate"><span><i class="icon-star"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i><i class="icon-star-o"></i> 0 Ratings</span></p> -->
                              <strong>2 adult, 1 Children</strong>
                            </label>
                          </div>
                      </div>
                      <div class="row">                        
                          <div class="col-md-6">
                            <label class="form-check-label" >
                              
                              <strong> Amount:</strong>
                            </label>
                          </div>
                      </div>

                      <div class="row">       
                          <div class="col-md-6">
                              <div class="form-group">
                                <p><strong> rp.3.000.000 (tax include)</strong>
                                  <div class="pull-right">
                                    
                                    
                                    <label for="send_email"> Send me an email </label>
                                    <input type="checkbox" id="send_email" name="send_email" value="{{request.user}}"> </div>
                                </p>
                              </div>
                          </div>
                      </div>

                      
                      
                      <hr>
                      <div class="row">   
                        <div class="col-md-6 ">
                            <div class="form-group ">
                              <input id="pay-button" type="submit" value="Pay Now" class="booking btn btn-primary py-3 pull-right">
                              <!-- <input type="submit" value="Check Availability" class="btn btn-primary py-3"> -->
                            </div>
                        </div>
                      </div>
                    </div>

                    <br><br>
                    <pre><div id="result-json">JSON result will appear here after payment:<br></div></pre>

                  {% else %}
                    <p id="login-first-label">Login first, or <a href="javascript:void(0);" onclick="register_first();">Create New Account</a></p>
                    <p id="register-first-label"><a href="javascript:void(0);" onclick="login_first();">Login first</a>, or Create New Account</p>
                                                  
                    <div class="fields" id="login-first">
                      <div class="row">                        
                          <div class="col-md-6">
                              <div class="form-group">
                                <input type="text" class="form-control" placeholder="Email">
                              </div>
                          </div>
                      </div>
                      <div class="row">       
                          <div class="col-md-6">
                              <div class="form-group">
                                <input type="password" class="form-control" placeholder="Password">
                              </div>
                          </div>
                      </div>
                      <div class="row">   
                        <div class="col-md-6 ">
                            <div class="form-group ">
                              <input type="submit" value="Login" class="booking btn btn-primary py-3 pull-right" onclick="do_login();">
                              <!-- <input type="submit" value="Check Availability" class="btn btn-primary py-3"> -->
                            </div>
                        </div>
                      </div>
                    </div>

                    <div class="fields" id="register-first">
                      <div class="row">                        
                          <div class="col-md-6">
                              <div class="form-group">
                                <input type="text" class="form-control" placeholder="Email">
                              </div>
                          </div>
                      </div>
                      <div class="row">       
                          <div class="col-md-6">
                              <div class="form-group">
                                <input type="password" class="form-control" placeholder="Password">
                              </div>
                          </div>
                      </div>
                      <div class="row">       
                          <div class="col-md-6">
                              <div class="form-group">
                                <input type="password" class="form-control" placeholder="Retype Password">
                              </div>
                          </div>                        
                      </div>
                      <div class="row">   
                        <div class="col-md-6 ">
                            <div class="form-group ">
                              <input type="submit" value="Register" class="booking btn btn-primary py-3 pull-right" onclick="do_register();">
                              <!-- <input type="submit" value="Check Availability" class="btn btn-primary py-3"> -->
                            </div>
                        </div>
                      </div>

                    </div>
                  {% endif %}

                </div>
          </div>
        </div>

      </div>
    </div>
  </section> <!-- .section -->

{% endblock %}

{% block extra_body %}
<!-- TODO: Remove ".sandbox" from script src URL for production environment. Also input your client key in "data-client-key" -->
<script src="https://app.sandbox.midtrans.com/snap/snap.js" data-client-key="SB-Mid-client-DEhbYKPYpEQm8_5M"></script>


<script>
  

  function do_check_availability() {
    $("#room-available").show();
    $("#room-status").text('Room Available');
  };

  function register_first() {
    $("#login-first").hide();
    $("#login-first-label").hide();

    $("#register-first").show();
    $("#register-first-label").show();
  };

  function login_first() {
    $("#login-first").show();
    $("#login-first-label").show();

    $("#register-first").hide();
    $("#register-first-label").hide();
  };

  /**
 * 
 * @param {number} min 
 * @param {number} max 
 * 
 * @returns {string}
 */
  const getRandomId = (min = 0, max = 500000) => {
    min = Math.ceil(min);
    max = Math.floor(max);
    const num =  Math.floor(Math.random() * (max - min + 1)) + min;
    return num.toString().padStart(6, "0")
  };

  $(document).ready(function() {
    $("#room-available").hide();
    $("#register-first").hide();
    $("#register-first-label").hide();
    
    document.getElementById('pay-button').onclick = function() {
      $.ajax({
          url: "/payment/"+ getRandomId() +"/3000000/suratiwan@gmail.com/", 
          success: function(result) {             
              console.log(result);
              
              snap.pay(result.token, {
              // Optional
              onSuccess: function(result){
                /* You may add your own js here, this is just example */ document.getElementById('result-json').innerHTML += JSON.stringify(result, null, 2);
              },
              // Optional
              onPending: function(result){
                /* You may add your own js here, this is just example */ document.getElementById('result-json').innerHTML += JSON.stringify(result, null, 2);
              },
              // Optional
              onError: function(result){
                /* You may add your own js here, this is just example */ document.getElementById('result-json').innerHTML += JSON.stringify(result, null, 2);
              }
            });
          }
      });

    };

  });

</script>
{% endblock %}